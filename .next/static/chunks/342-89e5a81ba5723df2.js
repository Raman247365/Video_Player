"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[342],{4790:(e,t,o)=>{o.d(t,{t:()=>r});var a=o(2115);class n{initializeRecognition(){if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return void console.warn("Speech recognition not supported");let e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition.continuous=!0,this.recognition.interimResults=!1,this.recognition.lang="en-US",this.recognition.onstart=()=>{this.isListening=!0,this.onStatus("Listening...",!0)},this.recognition.onend=()=>{this.isListening=!1,this.onStatus("Voice control stopped",!1)},this.recognition.onerror=e=>{console.error("Speech recognition error:",e.error),this.onStatus("Error: ".concat(e.error),!1)},this.recognition.onresult=e=>{let t=e.results[e.results.length-1];if(t.isFinal&&t[0].confidence>.7){let e=t[0].transcript.toLowerCase().trim();this.processCommand(e)}}}setupCommands(){this.commands=[{patterns:["play","start","resume"],action:"play"},{patterns:["pause","stop","halt"],action:"pause"},{patterns:["play pause","toggle play"],action:"togglePlay"},{patterns:["restart","start over"],action:"restart"},{patterns:["mute","silence","quiet"],action:"mute"},{patterns:["unmute","sound on"],action:"unmute"},{patterns:["skip forward","forward","skip ahead"],action:"skipForward"},{patterns:["skip backward","backward","go back"],action:"skipBackward"},{patterns:["next frame","frame forward"],action:"nextFrame"},{patterns:["previous frame","frame backward"],action:"previousFrame"},{patterns:["volume up","louder","increase volume"],action:"volumeUp"},{patterns:["volume down","quieter","decrease volume"],action:"volumeDown"},{patterns:["max volume","full volume","volume max"],action:"volumeMax"},{patterns:["min volume","volume zero"],action:"volumeMin"},{patterns:["speed up","faster","speed faster"],action:"speedUp"},{patterns:["slow down","slower","speed slower"],action:"speedDown"},{patterns:["normal speed","speed normal","speed one"],action:"normalSpeed"},{patterns:["double speed","speed double"],action:"doubleSpeed"},{patterns:["half speed","speed half"],action:"halfSpeed"},{patterns:["quality auto","auto quality"],action:"qualityAuto"},{patterns:["quality 8k","eight k","ultra quality"],action:"quality8k"},{patterns:["quality 4k","four k","high quality"],action:"quality4k"},{patterns:["quality 1080p","full hd","1080"],action:"quality1080p"},{patterns:["quality 720p","hd","720"],action:"quality720p"},{patterns:["quality 480p","standard","480"],action:"quality480p"},{patterns:["best quality","max quality"],action:"qualityBest"},{patterns:["lowest quality","min quality"],action:"qualityLowest"},{patterns:["fullscreen","full screen","maximize"],action:"fullscreen"},{patterns:["exit fullscreen","minimize","windowed"],action:"exitFullscreen"},{patterns:["picture in picture","pip","mini player"],action:"pictureInPicture"},{patterns:["take screenshot","screenshot","capture"],action:"screenshot"},{patterns:["add bookmark","bookmark this","mark this"],action:"addBookmark"},{patterns:["show bookmarks","list bookmarks"],action:"showBookmarks"},{patterns:["show info","video info","information"],action:"showInfo"},{patterns:["show stats","statistics","show statistics"],action:"showStats"},{patterns:["show chapters","chapters"],action:"showChapters"},{patterns:["hide info","close info","hide overlays"],action:"hideInfo"},{patterns:["what time","current time"],action:"announceTime"},{patterns:["how long","video length","duration"],action:"announceDuration"},{patterns:["show settings","settings","options"],action:"showSettings"},{patterns:["show shortcuts","shortcuts","help"],action:"showShortcuts"},{patterns:["show history","history","recent videos"],action:"showHistory"},{patterns:["visual effects on","effects on"],action:"effectsOn"},{patterns:["visual effects off","effects off"],action:"effectsOff"},{patterns:["voice off","stop listening","voice control off"],action:"voiceOff"},{patterns:["voice help","voice commands","what can i say"],action:"voiceHelp"}]}async processCommand(e){if(console.log("Processing voice command:",e),window.mlVoiceDetection)try{let t=await window.mlVoiceDetection.detectCommand(e);if(t.command&&t.confidence>.3){console.log("ML Detection: ".concat(t.command," (").concat(t.confidence.toFixed(3),")")),this.onCommand(this.mapMLCommand(t.command),t.parameters);return}}catch(e){console.warn("ML detection failed, using fallback:",e)}let t=this.processParametricCommands(e);if(t)return void this.onCommand(t.action,t.params);for(let t of this.commands)for(let o of t.patterns)if(e.includes(o))return void this.onCommand(t.action,t.params);this.onStatus('Command not recognized: "'.concat(e,'"'),this.isListening)}mapMLCommand(e){return({"playback.play":"play","playback.pause":"pause","playback.toggle":"togglePlay","playback.restart":"restart","volume.volume_up":"volumeUp","volume.volume_down":"volumeDown","volume.mute":"mute","volume.unmute":"unmute","volume.volume_set":"setVolume","navigation.skip_forward":"skipForward","navigation.skip_backward":"skipBackward","navigation.jump_time":"jumpToTime","speed.speed_up":"speedUp","speed.speed_down":"speedDown","speed.normal_speed":"normalSpeed","speed.double_speed":"doubleSpeed","speed.half_speed":"halfSpeed","quality.quality_auto":"qualityAuto","quality.quality_8k":"quality8k","quality.quality_4k":"quality4k","quality.quality_1080p":"quality1080p","quality.quality_720p":"quality720p","display.fullscreen":"fullscreen","display.exit_fullscreen":"exitFullscreen","display.pip":"pictureInPicture","display.screenshot":"screenshot","bookmarks.add_bookmark":"addBookmark","bookmarks.goto_bookmark":"gotoBookmark","bookmarks.show_bookmarks":"showBookmarks","info.show_info":"showInfo","info.show_stats":"showStats","info.current_time":"announceTime","info.duration":"announceDuration"})[e]||e}processParametricCommands(e){let t=e.match(/volume (\d+)/);if(t)return{action:"setVolume",params:{volume:parseInt(t[1])}};let o=e.match(/speed ([\d.]+)/);if(o)return{action:"setSpeed",params:{speed:parseFloat(o[1])}};let a=e.match(/(?:jump to|go to) (?:(\d+) (?:minutes?|mins?) ?)?(?:(\d+) (?:seconds?|secs?))?/);if(a)return{action:"jumpToTime",params:{time:60*parseInt(a[1]||"0")+parseInt(a[2]||"0")}};let n=e.match(/(?:jump to|go to) (\d+) percent/);if(n)return{action:"jumpToPercent",params:{percent:parseInt(n[1])}};let i=e.match(/bookmark (.+)/);if(i&&!e.includes("go to"))return{action:"addNamedBookmark",params:{name:i[1]}};let s=e.match(/go to bookmark (.+)/);return s?{action:"gotoBookmark",params:{name:s[1]}}:null}startListening(){if(!this.recognition)return void this.onStatus("Speech recognition not supported",!1);if(!this.isListening)try{this.recognition.start()}catch(e){console.error("Error starting voice recognition:",e),this.onStatus("Failed to start voice control",!1)}}stopListening(){this.recognition&&this.isListening&&this.recognition.stop()}isActive(){return this.isListening}destroy(){this.recognition&&(this.recognition.stop(),this.recognition=null)}constructor(e,t){this.recognition=null,this.isListening=!1,this.commands=[],this.onCommand=e,this.onStatus=t,this.initializeRecognition(),this.setupCommands()}}class i{speak(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"low";if(!this.enabled||!this.synth)return;"high"===t&&this.synth.cancel();let o=new SpeechSynthesisUtterance(e);o.rate=1.2,o.pitch=1,o.volume=.8,this.synth.speak(o)}setEnabled(e){this.enabled=e,e||this.synth.cancel()}isEnabled(){return this.enabled}constructor(){this.enabled=!0,this.synth=window.speechSynthesis}}class s{async checkServerHealth(){try{(await fetch("".concat(this.config.apiUrl,"/health"),{method:"GET",timeout:2e3})).ok&&(this.isServerAvailable=!0,console.log("✅ ML Voice Detection Server Connected"))}catch(e){this.isServerAvailable=!1,console.log("⚠️ ML Server unavailable, using local fallback")}}async detectCommand(e){if(this.isServerAvailable)try{let t=await fetch("".concat(this.config.apiUrl,"/detect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})});if(t.ok){let e=await t.json();if(e.confidence>=this.config.confidenceThreshold)return e}}catch(e){console.warn("ML detection failed, falling back to local:",e),this.isServerAvailable=!1}return this.config.useLocalFallback?this.localPatternMatch(e):{command:null,confidence:0,parameters:{},original_text:e,alternatives:[]}}localPatternMatch(e){let t=e.toLowerCase().trim(),o={command:null,confidence:0,patterns:[]};for(let e of[{patterns:["play","start","resume"],command:"playback.play",confidence:.9},{patterns:["pause","stop","halt"],command:"playback.pause",confidence:.9},{patterns:["restart","start over"],command:"playback.restart",confidence:.8},{patterns:["volume up","louder","increase volume"],command:"volume.volume_up",confidence:.8},{patterns:["volume down","quieter","decrease volume"],command:"volume.volume_down",confidence:.8},{patterns:["mute","silence"],command:"volume.mute",confidence:.9},{patterns:["unmute","sound on"],command:"volume.unmute",confidence:.9},{patterns:["skip forward","forward","skip ahead"],command:"navigation.skip_forward",confidence:.8},{patterns:["skip backward","backward","go back"],command:"navigation.skip_backward",confidence:.8},{patterns:["jump to","go to","seek to"],command:"navigation.jump_time",confidence:.7},{patterns:["speed up","faster"],command:"speed.speed_up",confidence:.8},{patterns:["slow down","slower"],command:"speed.speed_down",confidence:.8},{patterns:["normal speed","regular speed"],command:"speed.normal_speed",confidence:.8},{patterns:["double speed","two x"],command:"speed.double_speed",confidence:.8},{patterns:["half speed","slow motion"],command:"speed.half_speed",confidence:.8},{patterns:["quality auto","auto quality"],command:"quality.quality_auto",confidence:.8},{patterns:["8k","eight k","ultra quality"],command:"quality.quality_8k",confidence:.9},{patterns:["4k","four k","ultra hd"],command:"quality.quality_4k",confidence:.9},{patterns:["1080p","full hd"],command:"quality.quality_1080p",confidence:.9},{patterns:["720p","hd"],command:"quality.quality_720p",confidence:.9},{patterns:["fullscreen","full screen","maximize"],command:"display.fullscreen",confidence:.9},{patterns:["exit fullscreen","minimize"],command:"display.exit_fullscreen",confidence:.8},{patterns:["picture in picture","pip"],command:"display.pip",confidence:.9},{patterns:["screenshot","capture","take picture"],command:"display.screenshot",confidence:.8},{patterns:["add bookmark","bookmark this"],command:"bookmarks.add_bookmark",confidence:.8},{patterns:["show bookmarks","list bookmarks"],command:"bookmarks.show_bookmarks",confidence:.8},{patterns:["show info","video info"],command:"info.show_info",confidence:.8},{patterns:["show stats","statistics"],command:"info.show_stats",confidence:.8},{patterns:["what time","current time"],command:"info.current_time",confidence:.8},{patterns:["how long","duration"],command:"info.duration",confidence:.8}])for(let a of e.patterns)if(t.includes(a)){let n=this.calculateFuzzyScore(t,a)*e.confidence;n>o.confidence&&(o={...e,confidence:n})}let a=this.extractParameters(e);return{command:o.command,confidence:o.confidence,parameters:a,original_text:e,alternatives:[]}}calculateFuzzyScore(e,t){if(e===t)return 1;if(e.includes(t))return .9;let o=e.length>t.length?e:t,a=e.length>t.length?t:e;if(0===o.length)return 1;let n=this.levenshteinDistance(o,a);return(o.length-n)/o.length}levenshteinDistance(e,t){let o=[];for(let e=0;e<=t.length;e++)o[e]=[e];for(let t=0;t<=e.length;t++)o[0][t]=t;for(let a=1;a<=t.length;a++)for(let n=1;n<=e.length;n++)t.charAt(a-1)===e.charAt(n-1)?o[a][n]=o[a-1][n-1]:o[a][n]=Math.min(o[a-1][n-1]+1,o[a][n-1]+1,o[a-1][n]+1);return o[t.length][e.length]}extractParameters(e){let t={},o=e.match(/\b(\d+(?:\.\d+)?)\b/g);o&&(t.number=parseFloat(o[0]));let a=e.match(/(\d+)\s*(?:minutes?|mins?)\s*(?:(\d+)\s*(?:seconds?|secs?))?/);a&&(t.time=60*parseInt(a[1])+(a[2]?parseInt(a[2]):0));let n=e.match(/(\d+)\s*(?:percent|%)/);n&&(t.percent=parseInt(n[1]));let i=e.match(/bookmark\s+(.+?)(?:\s+at|\s*$)/);return i&&(t.bookmark_name=i[1].trim()),t}async batchDetect(e){if(this.isServerAvailable)try{let t=await fetch("".concat(this.config.apiUrl,"/batch_detect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({texts:e})});if(t.ok)return(await t.json()).results}catch(e){console.warn("Batch ML detection failed:",e)}return Promise.all(e.map(e=>this.localPatternMatch(e)))}setConfidenceThreshold(e){this.config.confidenceThreshold=Math.max(0,Math.min(1,e))}getServerStatus(){return this.isServerAvailable}constructor(e={}){this.isServerAvailable=!1,this.config={apiUrl:"http://localhost:5000",fallbackMode:!0,confidenceThreshold:.3,useLocalFallback:!0,...e},this.checkServerHealth()}}let r=e=>{let[t,o]=(0,a.useState)({isListening:!1,isSupported:!1,status:"Voice control ready",lastCommand:null}),r=(0,a.useRef)(null),l=(0,a.useRef)(null),d=(0,a.useRef)(null),p=(0,a.useCallback)((t,a)=>{var n;if(o(e=>({...e,lastCommand:t})),e(t,a),null==(n=l.current)?void 0:n.isEnabled()){let e=c(t,a);e&&l.current.speak(e)}},[e]),m=(0,a.useCallback)((e,t)=>{o(o=>({...o,status:e,isListening:t}))},[]),u=(0,a.useCallback)(()=>{var e;null==(e=r.current)||e.startListening()},[]),h=(0,a.useCallback)(()=>{var e;null==(e=r.current)||e.stopListening()},[]),f=(0,a.useCallback)(()=>{t.isListening?h():u()},[t.isListening,u,h]),b=(0,a.useCallback)(e=>{var t;null==(t=l.current)||t.setEnabled(e)},[]);return(0,a.useEffect)(()=>{let e="webkitSpeechRecognition"in window||"SpeechRecognition"in window;return o(t=>({...t,isSupported:e})),e&&(r.current=new n(p,m),l.current=new i,d.current=new s,window.mlVoiceDetection=d.current),()=>{var e;null==(e=r.current)||e.destroy()}},[p,m]),[t,{startListening:u,stopListening:h,toggleListening:f,setVoiceFeedback:b}]},c=(e,t)=>{if(t)switch(e){case"setVolume":return"Volume set to ".concat(t.volume," percent");case"setSpeed":return"Speed set to ".concat(t.speed,"x");case"jumpToTime":return"Jumped to ".concat(Math.floor(t.time/60)," minutes ").concat(t.time%60," seconds");case"jumpToPercent":return"Jumped to ".concat(t.percent," percent");case"addNamedBookmark":return'Bookmark "'.concat(t.name,'" added');case"gotoBookmark":return'Jumped to bookmark "'.concat(t.name,'"')}return({play:"Playing",pause:"Paused",togglePlay:"Toggled playback",restart:"Restarting video",mute:"Muted",unmute:"Unmuted",skipForward:"Skipped forward",skipBackward:"Skipped backward",volumeUp:"Volume increased",volumeDown:"Volume decreased",volumeMax:"Volume at maximum",volumeMin:"Volume at minimum",speedUp:"Speed increased",speedDown:"Speed decreased",normalSpeed:"Normal speed",doubleSpeed:"Double speed",halfSpeed:"Half speed",fullscreen:"Fullscreen mode",exitFullscreen:"Exited fullscreen",pictureInPicture:"Picture in picture mode",screenshot:"Screenshot taken",addBookmark:"Bookmark added",showInfo:"Showing video information",showStats:"Showing statistics",showSettings:"Opening settings",voiceOff:"Voice control disabled"})[e]||null}},6473:(e,t,o)=>{o.d(t,{A:()=>d});var a=o(5155),n=o(9137),i=o.n(n);o(2115);var s=o(6408),r=o(760),c=o(9911);let l=()=>(0,a.jsxs)("div",{className:"jsx-5fbdae3a054233bc voice-waveform",children:[[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(s.P.div,{className:"waveform-bar",animate:{scaleY:[.3,1,.3]},transition:{duration:.8,repeat:1/0,delay:.1*t,ease:"easeInOut"}},t)),(0,a.jsx)(i(),{id:"5fbdae3a054233bc",children:".voice-waveform.jsx-5fbdae3a054233bc{position:absolute;top:-30px;left:50%;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:end;-webkit-align-items:end;-moz-box-align:end;-ms-flex-align:end;align-items:end;gap:2px;height:20px}.waveform-bar.jsx-5fbdae3a054233bc{width:3px;height:100%;background:#0f0;-webkit-border-radius:1px;-moz-border-radius:1px;border-radius:1px;-webkit-transform-origin:bottom;-moz-transform-origin:bottom;-ms-transform-origin:bottom;-o-transform-origin:bottom;transform-origin:bottom}"})]}),d=e=>{let{isListening:t,isSupported:o,status:n,lastCommand:d,voiceFeedbackEnabled:p,onToggleListening:m,onToggleVoiceFeedback:u,onShowCommands:h}=e;return o?(0,a.jsxs)("div",{className:"jsx-420de37d64a028ce voice-control-container",children:[(0,a.jsxs)(s.P.button,{className:"voice-control-button ".concat(t?"listening":""),onClick:m,whileHover:{scale:1.1},whileTap:{scale:.9},title:t?"Stop voice control":"Start voice control",children:[t?(0,a.jsx)(c.i0t,{}):(0,a.jsx)(c.$j$,{}),t&&(0,a.jsx)(s.P.div,{className:"listening-pulse",animate:{scale:[1,1.5,1],opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]}),(0,a.jsx)(s.P.button,{className:"voice-feedback-button",onClick:u,whileHover:{scale:1.1},whileTap:{scale:.9},title:p?"Disable voice feedback":"Enable voice feedback",children:p?(0,a.jsx)(c.pPd,{}):(0,a.jsx)(c.Bhh,{})}),(0,a.jsx)(s.P.button,{className:"voice-help-button",onClick:h,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Show voice commands",children:"?"}),(0,a.jsx)(r.N,{children:(t||d)&&(0,a.jsxs)(s.P.div,{className:"voice-status",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[(0,a.jsx)("div",{className:"jsx-420de37d64a028ce status-text",children:n}),d&&(0,a.jsxs)("div",{className:"jsx-420de37d64a028ce last-command",children:["Last: ",d]})]})}),t&&(0,a.jsx)(l,{}),(0,a.jsx)(i(),{id:"420de37d64a028ce",children:".voice-control-container.jsx-420de37d64a028ce{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px}.voice-control-button.jsx-420de37d64a028ce{position:relative;width:40px;height:40px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;border:2px solid rgba(255,255,255,.3);background:rgba(0,0,0,.6);color:white;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease;overflow:hidden}.voice-control-button.jsx-420de37d64a028ce:hover{border-color:rgba(255,255,255,.6);background:rgba(0,0,0,.8)}.voice-control-button.listening.jsx-420de37d64a028ce{border-color:#0f0;background:rgba(0,255,0,.1);color:#0f0;-webkit-box-shadow:0 0 20px rgba(0,255,0,.3);-moz-box-shadow:0 0 20px rgba(0,255,0,.3);box-shadow:0 0 20px rgba(0,255,0,.3)}.listening-pulse.jsx-420de37d64a028ce{position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;border:2px solid#0f0;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;pointer-events:none}.voice-feedback-button.jsx-420de37d64a028ce,.voice-help-button.jsx-420de37d64a028ce{width:32px;height:32px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;border:1px solid rgba(255,255,255,.3);background:rgba(0,0,0,.6);color:white;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease;font-size:12px}.voice-feedback-button.jsx-420de37d64a028ce:hover,.voice-help-button.jsx-420de37d64a028ce:hover{border-color:rgba(255,255,255,.6);background:rgba(0,0,0,.8)}.voice-status.jsx-420de37d64a028ce{position:absolute;top:-60px;left:0;background:rgba(0,0,0,.9);border:1px solid rgba(255,255,255,.3);-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:8px 12px;min-width:200px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.status-text.jsx-420de37d64a028ce{color:#0f0;font-size:12px;font-weight:500;margin-bottom:4px}.last-command.jsx-420de37d64a028ce{color:rgba(255,255,255,.7);font-size:11px}.voice-control-unsupported.jsx-420de37d64a028ce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:4px 8px;background:rgba(255,0,0,.1);border:1px solid rgba(255,0,0,.3);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}"})]}):(0,a.jsx)("div",{className:"voice-control-unsupported",children:(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Voice control not supported"})})}}}]);